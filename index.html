<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>R-P-S</title>
</head>
<body>
    <script>
        /*Computer chooses*/
        function getComputerChoice(){
            let choice = Math.random()
            if (choice < 0.33){
                return "rock"
            } else if (choice < 0.66) {
                return "paper"
            } else {
                return "scissors"
            }
        }
        /*Play a round*/
        function playRound(playerSelection, computerSelection){
            playerSelection = playerSelection.toLowerCase()
            switch (playerSelection){
                case "rock":
                    if (computerSelection == "paper"){
                        console.log("You lose! Computer chose " + computerSelection)
                        return -1
                    } else if (computerSelection == "scissors") {
                        console.log("You win! Computer chose " + computerSelection)
                        return 1
                    } else {
                        console.log("It's a tie! You both chose " + computerSelection)
                        return 0 
                    }
                    break;
                case "paper":    
                    if (computerSelection == "scissors"){
                        console.log("You lose! Computer chose " + computerSelection)
                        return -1
                    } else if (computerSelection == "rock") {
                        console.log("You win! Computer chose " + computerSelection)
                        return 1
                    } else {
                        console.log("It's a tie! You both chose " + computerSelection)
                        return 0 
                    }
                    break;
                case "scissors":
                 if (computerSelection == "rock"){
                        console.log("You lose! Computer chose " + computerSelection)
                        return -1
                    } else if (computerSelection == "paper") {
                        console.log("You win! Computer chose " + computerSelection)
                        return 1
                    } else {
                        console.log("It's a tie! You both chose " + computerSelection)
                        return 0 
                    }
                    break;
                default:    
                    console.error("Invalid selection: " + playerSelection)
                    return 0 
                }   

        }
        
        /*Play r-p-s, first to 5 wins*/
        
        function game(){
            let playerScore=0
            let computerScore=0
            while (playerScore < 5 && computerScore < 5){
               round = playRound(prompt("rock, paper or scissors?",getComputerChoice()),getComputerChoice())
               if (round == 1) {
                playerScore++;
                console.log(playerScore + " vs " + computerScore)
               } else if (round == -1){
                computerScore++
                console.log(playerScore + " vs " + computerScore)
               } else {
                console.log(playerScore + " vs " + computerScore)
               };
               
            }
            if (computerScore = 5){
                console.log("Computer won, humanity is doomed")
            } else if (playerScore = 5){
                console.log("You won! You beat a computer at R-P-S")
            }
        }
        game()
    </script>
</body>
</html>